# Feature Specification: Baseline Project Specification

**Feature Branch**: `1-baseline-specification`
**Created**: 2025-11-14
**Status**: Draft
**Input**: Create a baseline specification that defines the product scope, primary user journeys, data provenance, and quality gates for the "Onregelmatige Werkwoorden Trainer" project.

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Learn single verb (Priority: P1)

As a learner, I want to practice an irregular Dutch verb using a flash-card style interface so I can recall its forms and mark progress.

**Why this priority**: Core value of the product — practicing verbs is the primary user goal.

**Independent Test**: Open the Learn view, answer a single prompt; the UI presents a verb, accepts an input or selection, and records whether the answer was correct.

**Acceptance Scenarios**:
1. **Given** the user has a learning list and opens Learn, **When** the system shows a verb and the user answers correctly, **Then** the word's progress advances (bucket +1) and the next verb is shown.
2. **Given** the user answers incorrectly, **When** they submit, **Then** the word's progress reduces (bucket -1) and the answer is recorded for statistics.

---

### User Story 2 - Review all words table (Priority: P2)

As a learner, I want to see a table of all verbs with learning status and filters by CEFR level so I can manage my learning list.

**Independent Test**: Open All Words view and verify the table lists verbs with status, level filters work, and adding/removing words from current learning list updates the data.

---

### User Story 3 - Export / reproducible data (Priority: P3)

As a teacher or power user, I want to export verb lists and progress to CSV/JSON produced by checked-in scripts so exports are reproducible and versioned.

**Independent Test**: Run the export script in `data/` and verify output includes version metadata and matches the canonical `data/onregelmatige-werkwoorden.json` after transformation.

---

### Edge Cases

- Learning list empty: Learn view should show a helpful empty state and steps to add words.
- Duplicate verbs in data: parser scripts should deduplicate and report issues.
- Offline usage: UIs should fail gracefully when networked features are unavailable.

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: System MUST present a Learn UI that shows a verb prompt and accepts a response, and must update a per-word progress bucket.
- **FR-002**: System MUST persist user progress (per the persistence choice in Assumptions) and allow removal/addition of verbs from the active learning list.
- **FR-003**: System MUST provide an All Words table with filters by CEFR level and progress status.
- **FR-004**: System MUST include an export script in `data/` that generates CSV/JSON with version metadata reproducible from `data/onregelmatige-werkwoorden.json`.
- **FR-005**: System MUST include automated tests for user-visible behavior that affect scoring, persistence, or exports.

*Notes on unclear requirements will appear in Assumptions/Clarifications below.*

### Key Entities *(include if feature involves data)*

- **Verb**: { id, infinitive, imperfectum[], perfectum[], vertaling, hulpWerkwoorden[] }
- **UserProgress**: { userId?, verbId, bucket (0-5), lastReviewedAt, correctCount, incorrectCount }
- **LearningList**: { id, name, verbIds[] }

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: Learners can complete a single Learn interaction (prompt → answer → progress change) in under 30 seconds on a standard laptop.
- **SC-002**: 95% of exported CSV/JSON files generated by the checked-in script must parse and validate against the canonical schema derived from `data/onregelmatige-werkwoorden.json`.
- **SC-003**: Unit or integration tests covering Learn flow and persistence must be present and pass in CI for any PR touching those areas.
- **SC-004**: The All Words table must load and render the first 100 entries in under 2 seconds on a typical dev machine.

## Assumptions

- The canonical verb data source is `data/onregelmatige-werkwoorden.json` (per repository README).
- The project currently has no user accounts; by default, progress MAY be local (browser storage) unless a server-backed storage decision is made.
- Spaced repetition uses the 5-bucket model described in README; the app will follow that semantics unless changed.

## Persistence (decision: Hybrid — export/import)

Decision: Option C (Hybrid). By default the application will store user progress locally (browser storage) for a zero-backend experience. The project will provide a checked-in export/import mechanism so users can export their progress to a portable, versioned JSON/CSV file and import it on another device.

Implications and requirements introduced by this decision:

- The `UserProgress` entity MUST include an optional exportable provenance block: { schemaVersion, exportedAt, sourceAppVersion } so exported files are self-describing and reproducible.
- The export/import script(s) MUST live under `data/` or `web-ui/scripts/exports/` and include version metadata; exports MUST be reversible (import of an export produced by the same or newer schema SHOULD succeed or provide a clear migration error).
- Persisted local data schema MUST be backwards-compatible where possible; when incompatible changes are needed, the project MUST provide migration logic for imports or document incompatibilities and recommend re-export/import steps.
- Because progress is primarily local, privacy obligations are minimal, but the UI and README MUST document how to export/remove local data.

Notes: Server-backed accounts remain an option for a later phase; the current spec assumes hybrid export/import to balance simplicity and multi-device portability.

## Implementation Notes

- Data provenance: All transformations on verb data must be scripted and checked in under `data/` so exports and derived artifacts are reproducible.
- Tests: Implement failing tests first for Learn flow and persistence, then implement code until tests pass (TDD encouraged per constitution).
- Versioning: Any data schema change MUST mark as MAJOR and include a migration guide.

## Deliverables

- `specs/1-baseline-specification/spec.md` (this file)
- Quality checklist at `specs/1-baseline-specification/checklists/requirements.md`
- Suggested tasks to create in planning: implement Learn UI (P1), persistence strategy (P1), All Words table (P2), export script & tests (P3).

## Success: SPEC ready for planning

This spec is ready for the planning phase after the user answers the persistence clarification (Q1 above). Once persistence is decided the spec can be finalized and `/speckit.plan` run.
